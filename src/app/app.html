<mat-sidenav-container class="sidenav-container">
  <mat-sidenav #drawer mode="side" class="sidenav" [fixedInViewport]="true">
    <mat-toolbar color="primary" class="sidenav-header">
      <span>Navigacija</span>
    </mat-toolbar>

    <mat-nav-list>
      @if (authService.user$ | async; as user) {
        <a
          mat-list-item
          [routerLink]="['/dashboard']"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          (click)="drawer.close()"
        >
          <mat-icon matListItemIcon>dashboard</mat-icon>
          <span matListItemTitle>Dashboard</span>
        </a>

        <a
          mat-list-item
          [routerLink]="['/registruoti', 'imone']"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          (click)="drawer.close()"
        >
          <mat-icon matListItemIcon>business</mat-icon>
          <span matListItemTitle>Registruoti įmonę</span>
        </a>

        <a
          mat-list-item
          [routerLink]="['/registruoti', 'klientas']"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          (click)="drawer.close()"
        >
          <mat-icon matListItemIcon>person_add</mat-icon>
          <span matListItemTitle>Registruoti klientą</span>
        </a>
      } @else {
        <a
          mat-list-item
          [routerLink]="['/auth']"
          (click)="drawer.close()"
        >
          <mat-icon matListItemIcon>login</mat-icon>
          <span matListItemTitle>Prisijungti</span>
        </a>

        <a
          mat-list-item
          [routerLink]="['/auth']"
          (click)="drawer.close()"
        >
          <mat-icon matListItemIcon>person_add</mat-icon>
          <span matListItemTitle>Registruotis</span>
        </a>
      }
    </mat-nav-list>


    <mat-divider></mat-divider>
  </mat-sidenav>

  <mat-sidenav-content>
    <mat-toolbar color="primary" class="top-toolbar">
      <button mat-icon-button (click)="drawer.toggle()">
        <mat-icon>menu</mat-icon>
      </button>
      <span>{{ title() }}</span>
      <span class="spacer"></span>
      @if (authService.user$ | async; as user) {
        <button mat-button disabled class="user-info">
          <mat-icon>account_circle</mat-icon>
          <span>{{ user.email }}</span>
        </button>
        <button mat-button color="warn" (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Atsijungti</span>
        </button>
      } @else {
        <button
          mat-button
          color="accent"
          [routerLink]="['/auth']"
          routerLinkActive="active"
          (click)="drawer.close()"
          class="login-btn"
        >
          <mat-icon>login</mat-icon>
          <span>Prisijungti</span>
        </button>
      }

    </mat-toolbar>

    <div class="scrollable-content">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
